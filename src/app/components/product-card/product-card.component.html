<div
  (click)="navigateToProduct()"
  class="flex flex-col md:flex-row bg-surface border border-border rounded-2xl overflow-hidden max-w-lg md:min-h-72 hover:bg-surface-hover transition-colors cursor-pointer group relative"
>
  <div class="relative w-full md:w-64 h-56 md:h-auto shrink-0">
    <img
      [ngSrc]="product().mainImage"
      [alt]="product().name"
      fill
      class="object-cover object-center"
      priority
    />
  </div>

  <div class="p-5 flex flex-col justify-between flex-1">
    <div>
      <h3 class="text-lg font-heading font-semibold text-text leading-tight line-clamp-2 group-hover:text-primary transition-colors">
        {{ product().name }}
      </h3>

      <p class="mt-2 text-sm text-text-muted line-clamp-2">
        {{ product().description }}
      </p>

      <p class="mt-4 text-xl font-semibold text-text">
        {{ product().price | currency:'INR':'symbol':'1.0-0' }}
      </p>

      <div class="mt-5 flex flex-wrap items-center gap-3">
        @for (size of availableSizes(); track size) {
          <button
            type="button"
            (click)="handleSizeSelect(size, $event)"
            [attr.aria-pressed]="selectedSize() === size"
            class="w-9 h-9 rounded-full border text-xs font-medium transition-all"
            [class.border-primary]="selectedSize() === size"
            [class.bg-primary-10]="selectedSize() === size" 
            [class.text-primary]="selectedSize() === size"
            [class.border-border]="selectedSize() !== size"
            [class.text-text-muted]="selectedSize() !== size"
            [class.hover:border-primary]="selectedSize() !== size"
            [style.background-color]="selectedSize() === size ? 'oklch(var(--color-primary) / 0.1)' : ''"
          >
            {{ size }}
          </button>
        }
      </div>
    </div>

    <button
      type="button"
      [disabled]="!selectedSize()"
      (click)="handleAddToCart($event)"
      class="mt-6 w-full py-2.5 rounded-lg text-sm font-medium text-text-inverse bg-linear-to-br from-primary to-primary-dark transition-all hover:-translate-y-0.5 hover:shadow-[0_10px_20px_var(--color-primary)/30] cursor-pointer disabled:opacity-50 disabled:pointer-events-none"
    >
      Add to cart
    </button>
  </div>
</div>